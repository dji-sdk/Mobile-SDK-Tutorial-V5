## 介绍

任务可用于轻松实现飞行自动化。 有许多不同的任务类型提供不同的产品行为。 某些任务可以上传到飞机并由飞机进行管理，而其他任务则可以通过移动设备进行管理。

从移动设备执行的任务可能会提供更复杂或可自定义的行为，但是，如果遥控器和飞机之间的无线链接会丢失，所以它们可能会中断。 相比之下，在飞机上执行的任务比较难被实时修改，并且受飞机内存的限制，但是当无线链路丢失时，它们可以继续执行。

## 任务管理

任务管理模块负责执行任务。 单个任务可以通过专门的任务管理模块来运行，对于一系列任务和动作可以使用Timeline来依次运行。

## 航点任务

航点任务是通过向无人机发送一系列预定义的位置点（航点），无人机会自动飞往这些航点。 航点信息包括纬度，经度和海拔高度。 航点之间的飞机航向和高度可以逐渐变化。同时可以在每个航点上执行一系列动作（例如拍照）。

在执行任务期间，可以使用遥控器摇杆手动调整任务。 可以加快，降低速度，甚至反向执行任务。

![](https://terra-1-g.djicdn.com/84f990b0bbd145e6a3930de0c55d3b2b/admin/doc/ff79658d-a19e-429b-b321-202b45ffa58e.gif)

航点任务可以上传到飞机并由飞机执行，但受飞行控制器中的存储量限制。 

### 热点任务

在热点任务中，飞机将按照恒定半径围绕指定点（称为**热点**）飞行。 高度，速度，热点位置，飞机航向和飞行方向都可以自定义。

任务期间，还可以使用遥控器摇杆手动调节高度，航向和半径。

![](https://terra-1-g.djicdn.com/84f990b0bbd145e6a3930de0c55d3b2b/admin/doc/15ec4925-207b-47c9-93bd-3626160a029a.gif)

### Follow Me 任务

在**Follow Me**任务中，飞机将跟踪GPS坐标，该坐标按照一定的间隔和固定的高度持续发送到飞机上。

如果超过6秒钟未收到新的GPS坐标，则飞机将悬停在原位。

![followMe](https://terra-1-g.djicdn.com/84f990b0bbd145e6a3930de0c55d3b2b/admin/doc/a628a08f-6bd2-49b7-b967-2de843a5df8d.gif)

### 智能跟随任务

智能跟随(ActiveTrack)任务允许飞机使用视觉系统跟踪运动中的物体，而无需在物体上安装GPS跟踪器。

* 用户在实时视频视图上定义一个矩形，该矩形定义了要跟踪的目标。
* 矩形被发送到飞机。
* 飞机将发回它任务要跟踪的矩形目标，并要求用户确认该矩形是否是你需要跟踪的目标。
* 确认后，飞机将开始跟随目标的移动。
* 如果跟随算法丢失目标，飞机将悬停并要求再次确认目标。

在执行任务期间，主摄像头用于跟踪目标，因此，用户或应用程序无法控制云台。 如有需要可以使用遥控器的俯仰，横滚和油门摇杆命令手动飞行飞机。

智能任务有以下三种模式：

- 跟随模式

  飞机以恒定的距离跟随在目标的后面或前面。 诸如Mavic Pro之类的某些产品还支持手势模式和环绕对象的功能。 手势模式允许目标使用手势拍照启动跟随。
  
- 平行跟随模式

  飞机与目标平行移动而不是向前或者向后移动。

- 焦点模式

  飞机的摄像头将自动跟随目标，但是飞机不会自动与主体保持恒定的距离。 您可以使用遥控器控制飞机在被跟踪目标周围移动。

![p4ActiveTrackAni](https://terra-1-g.djicdn.com/84f990b0bbd145e6a3930de0c55d3b2b/admin/doc/6f73e5b0-3cbe-4cda-9476-73fd36805f58.gif)

### TapFly任务

TapFly任务可以使飞机沿着用户选择的实时视频流上的某个点的方向飞行。 使用实时视频流中的位置目标初始化任务。 计算出坐标的3D方向，然后飞机便朝该方向飞行。 当飞行场景的光线明亮（大于300 lux但小于10,000 lux）时，飞机可以自动避开障碍物。 如果飞机达到其半径限制，任务停止，用户拉回油门杆或遇到无法绕过的障碍物，则飞机将停止向该方向飞行。

遥控器的偏航摇杆可用于在执行任务期间调整飞机的航向。

只有具有视觉系统的新型飞机才支持TapFly任务。

对于Phantom 4 Professional，有三种TapFly模式：

- TapFly Forward –飞机将飞向目标。 前向障碍物感应系统处于活动状态。
- TapFly Backward – 飞机将以与目标相反的方向飞行。 向后障碍物感应系统处于活动状态。
- TapFly Free – 飞机将飞向目标。 用户可以用遥控器摇杆杆控制航向。 当飞机向侧面飞行时，障碍物传感系统可能无法正常工作。

![p4TapFlyAni](https://terra-1-g.djicdn.com/84f990b0bbd145e6a3930de0c55d3b2b/admin/doc/05f949b4-2d57-4850-9d17-0e92312ca200.gif)

### 全景任务

全景任务会在拍摄照片时将相机旋转180或360度，然后可以将其下载下来用于渲染全景照片。 在圆形模式下，将拍摄8张照片。 在半圈模式下，拍摄5张照片。 在完成任务之前，无法将其他命令发送到相机。 全景任务不支持图像拼接功能，因此必须手动拼接图像。 所有图像将存储在SD卡中。

仅OSMO支持全景任务。
