## 坐标系介绍

飞行器运动的描述取决于坐标系（或参考系）的坐标轴的位置和方向。 存在许多坐标系，但Mobile SDK中使用的两个坐标系是相对于飞行器机身和相对于地面的坐标系。

### Body坐标系

Body坐标系是相对于飞行器本身的。定义了三个垂直轴，以原点为重心，并且**X**轴指向飞行器的前部，**Y**轴穿过飞行器的右部。 使用<a href="https://en.wikipedia.org/wiki/Right-hand_rule" target="_blank">右手法则</a>，然后**Z**轴穿过飞行器的底部。

<div align=center><img src="https://terra-1-g.djicdn.com/84f990b0bbd145e6a3930de0c55d3b2b/admin/doc/6474314c-1a8f-4fb6-97eb-c5fc95adc9d1.png" width="" ></div>

因此，在Body坐标系中将飞行器在X，Y和Z上的正向平移分别定义为向前，向右和向下平移。

还可以使用 <a href="https://en.wikipedia.org/wiki/Right-hand_rule" target="_blank">右手法则</a> 来描述飞行器旋转。描述旋转运动时，`X轴`对应`横滚轴（Roll）`，`Y轴`对应 `俯仰轴（Pitch）`，`Z轴`对应`偏航轴（Yaw）`，飞行器以对应轴为中心轴旋转，分别形成横滚角，俯仰角，偏航角，顺时针方向为正。

<div align=center><img src="https://terra-1-g.djicdn.com/84f990b0bbd145e6a3930de0c55d3b2b/admin/doc/d1e6606e-4933-4d52-8338-d2772c51f70b.png" width="" ></div>

横滚，俯仰和偏航的定义与飞行器body坐标系一致，但是对于初次看到它的开发人员有时可能不直观。例如，如果飞行器沿俯仰轴（Y轴）顺时针旋转，俯仰角为正，飞行器移动方向为机头后方，即横滚轴（X轴）负方向。如果飞行器沿俯仰轴（Y轴）逆时针旋转，俯仰角为负，则飞行器移动方向为机头前方，即横滚轴（X轴）正方向。因此，在使用横滚，俯仰和偏航来移动飞行器时必须格外小心，注意理解。

### 地面(Ground) 坐标系

用于飞行器的一种流行的地面（Ground）坐标系统，将 **X**正轴对应**北**方向，**Y**正轴对应**东**方向，**Z**正轴对应**下**方向。此约定称为 **北-东-地** 或 **NED**。

**Z正轴**对应**下**方向可能需要一些时间来适应，但是这很方便，因为X轴和Y轴与右手定则和法线导航航向角保持一致。 航向角为0度，将指向北方，+ 90° 指向东方。NED坐标系的原点通常是现实世界中的一个点（例如起飞位置）。

<html><img src="https://terra-1-g.djicdn.com/84f990b0bbd145e6a3930de0c55d3b2b/admin/doc/219199f2-a94d-4f6c-8d48-e3782cdd4a33.png" width=200></html>

## 姿态和飞行

飞行器和云台的方向称为**姿态**，由Body坐标系中俯仰，横滚和偏航的旋转定义。

与**油门**组合使用时，飞行器可以按照俯仰，横滚和偏航方向进行旋转，从而使飞行器移动。

### 俯仰

![](https://terra-1-g.djicdn.com/84f990b0bbd145e6a3930de0c55d3b2b/admin/doc/878947e0-d804-48c8-a490-a4b5c8dec58f.gif)

上图从侧面显示了飞行器。俯仰衡量了飞行器围绕横向（Y，俯仰）轴的旋转程度。 调整俯仰将使飞行器向前或向后倾斜。

为了向前倾斜，后螺旋桨比前螺旋桨旋转得更快，推力更大。飞行控制器会自动平衡每个螺旋桨的推力，Mobile SDK提供了API调整俯仰角和油门。

### 横滚

![](https://terra-1-g.djicdn.com/84f990b0bbd145e6a3930de0c55d3b2b/admin/doc/d948ebac-aee3-491b-a269-acf666df59ae.gif)

上图从背面显示了飞行器。 横滚衡量了飞行器绕纵向（X，滚动）轴的旋转程度。 调整横滚角会使飞行器向左或向右倾斜。

向左滚动时，右螺旋桨比左螺旋桨旋转得更快，并且推力更大。 Mobile SDK提供了用于调整横滚角度和速度以实现移动的API。

### 偏航

![](https://terra-1-g.djicdn.com/84f990b0bbd145e6a3930de0c55d3b2b/admin/doc/9ede03b8-faf2-49e8-ac1e-8ef3abcabd6c.gif)

上图从上方显示了飞行器。 偏航衡量了飞行器绕垂直（Z，偏航）轴的旋转。 调整偏航角将改变飞行器的航向。

飞行器的桨叶有一半是顺时针旋转的，而另一半是逆时针旋转的。 当所有飞行器均以相同速度旋转时，飞行器的航向将保持恒定。 如果一半旋转速度快于另一半旋转速度，则飞行器将绕偏航轴旋转。 飞行控制器可以平衡每个螺旋桨的速度，DJI SDK提供了API设置航向角。

## 油门

![](https://terra-1-g.djicdn.com/84f990b0bbd145e6a3930de0c55d3b2b/admin/doc/2ab950b5-c039-4617-9ba3-b5fc1f412bc9.gif)

油门通过控制飞行器的动力系统来推动飞行器运动。 当飞行器处于水平状态时，由于所有推力都在垂直方向上，因此调节油门将使飞行器上下移动。 但是，当飞行器不水平（俯仰或倾角不为零）时，推力将具有水平分量，因此飞行器将水平移动。 较大的俯仰角或侧倾角将导致更大的水平推力，从而导致更快的水平运动。

## IOC（智能方向控制）

IOC（在Mobile SDK中称为飞行方向模式）定义了飞行器如何理解水平飞行命令（向前，向后，向左和向右）。

默认情况下，飞行器将相对于自身飞行，因此发送向左命令会导致飞行器向左飞行， 如果正在从第一人称视角驾驶飞行器，这是合理的。 但是当远距离控制飞行器时，可能会造成混乱或不便。

当飞手无法确定飞行器的航向时，则很难预测飞行器相对于飞手的运动方式。 如果飞行器面向飞手，当发出向左飞行的命令时，飞行器将向右移动。

因此，我们提供了**航向锁定**和**返航点锁定**两种模式，它们可以相对于飞手而不是飞行器进行移动。 这些模式只在带有"F"和"P"的遥控器上支持。


### 航向锁定

**航向锁定**模式使飞行器相对于固定航向移动。 如果航向为0度，则为正北方，那么无论飞行器的偏航方向如何，只要发出向左飞行命令，飞行器就会向西移动。

下图说明了飞行器，其机头方向与航向锁定航向相反，并显示当发出向前或向右命令时，飞行器将相对于其自身分别向后或向左移动。

![](https://terra-1-g.djicdn.com/84f990b0bbd145e6a3930de0c55d3b2b/admin/doc/25e8a5a4-62d5-4f15-96cc-9e75a20ac0e8.png)

### 返航点锁定
**返航点锁定**模式使飞行器相对于返航点径向移动。 向前和向后的命令将分别使飞行器远离或靠近原点。 左右命令将使飞行器在当前半径处绕返航点进行圆周运动。

![](https://terra-1-g.djicdn.com/84f990b0bbd145e6a3930de0c55d3b2b/admin/doc/db1726b8-d47b-41ee-93ab-96fd4d1a2617.png)
