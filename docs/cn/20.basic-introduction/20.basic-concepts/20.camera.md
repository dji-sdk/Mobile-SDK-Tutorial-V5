## 介绍

相机拍摄照片和视频。 可以选择很多不同的参数设置，分辨率，帧率，曝光设置，图片设置和文件类型。相机具有本地存储空间（SD卡或者SSD），用于存储媒体文件。

本指南涵盖了DJI相机提供的各种设置，模式和功能。关于相机的更多概念可以参考[相机曝光原理](https://developer.dji.com/doc/mobile-sdk-tutorial/cn/basic-introduction/basic-concepts/camera-exposure.html)。

## 操作（工作）模式

DJI相机有几种操作模式：

* 照片拍摄
* 视频拍摄
* 回放
* 媒体文件下载
* 广播

相机在任何时候只能在一种模式下操作。 例如，在拍照期间无法进行媒体文件下载。

### 照片拍摄

使用照片拍摄功能有以下几张模式。

* **单拍**：每次发出`shootPhoto`命令时都拍摄一张照片。
* **连拍**：每次发出`shootPhoto`命令时，会连续拍摄指定张数的照片。 这对于捕获动作场景很有用。
* **RAW连拍**：每次发出`shootPhoto`命令时，会连续拍摄指定张数的RAW照片。 当使用SSD存储时，**RAW连拍**可以比**间隔**更快地拍摄RAW照片。
* **HDR**：拍摄高动态范围照片。这导致拍摄了几张具有不同曝光水平的照片，然后合并为一张照片。 不同的曝光水平会增加在黑暗和明亮区域的对比度，从而增加照片的动态范围。
* **AEB（自动包围曝光）**：每次发出`shootPhoto`命令时，以不同的曝光水平拍摄多张照片并分别保存。
* **间隔**：相机将以预定的时间间隔（例如，每5秒钟）拍摄一定数量的照片，或无限期地拍摄照片。
* **延时摄影**：相机将以预定的时间间隔拍摄照片，然后将照片合成为延时视频。


## 图片质量，分辨率和帧率

### 视频分辨率和帧率

DJI相机支持1280x720（720p），1920x1080（1080p），2704x1520、3840x2160和4096x2160（4K）的视频分辨率。

分辨率将决定能够捕获的最大帧率。 分辨率和帧率的组合可以在SDK中查询，但是通常选择4K分辨率会将帧率限制为24/25 fps。 某些相机仅在1080p分辨率下最高支持120 fps。

### 照片分辨率和宽高比

DJI相机具有固定的照片分辨率。 在某些相机上，宽高比可以在4：3和16：9之间更改。 由于传感器的宽高比是4：3，因此16：9的图片只是4：3图像的裁剪版本。

### 压缩

DJI的所有相机都支持照片和视频的压缩。 某些相机还支持未压缩（RAW）文件格式。

RAW和压缩的对比：

<table id="t01">
  <thead>
    <tr>
      <th colspan="4">RAW vs 压缩</th>
    </tr>
    <tr>
      <th width=180>比较项</th>
      <th width=100>Raw</th>
      <th width=100>压缩</th>
      <th>备注</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>画面质量</td>
      <td>高</td>
      <td>低</td>        
      <td>压缩算法是有损的。 在小屏幕上，有时并不明显，但在较大的图像上，或在捕获具有高对比度和色彩的场景时，差异会更明显。</td>
    </tr>
    <tr>
      <td>后期处理质量</td>
      <td>高</td>        
      <td>低</td>
      <td>RAW图像使用更多位来描述每个像素。这将转化为更多的亮度级别，使曝光补偿更加容易。在彩色图像中，每种颜色都由红色，绿色和蓝色像素的亮度表示，这也意味着存在更多颜色，从而使白平衡调整更加容易。</td>
    </tr>
    <tr>
      <td>后处理的必要性</td>
      <td>需要更多后处理</td>        
      <td>较少后处理</td>
      <td>当曝光和白平衡良好时，压缩图像通常需要较少的后期处理。如果没有其他要求，要共享RAW图像，通常需要将其压缩为更常见的文件格式。</td>
    </tr>
    <tr>
      <td>与媒体查看器和编辑器的兼容性</td>
      <td>较少</td>        
      <td>较多</td>
      <td>大多数相机使用不同的未压缩图像格式，因此不太可能受到所有媒体查看器和编辑器的支持。</td>
    </tr>
    <tr>
      <td>文件大小</td>
      <td>更大</td>        
      <td>更小</td>
      <td>较小的文件大小使存储和共享媒体更加容易。</td>
    </tr>
    <tr>
      <td>拍照间隔</td>
      <td>更长</td>        
      <td>更短</td>
      <td>与JPEG相比，处理和保存RAW图像需要更长的时间。 在固定间隔拍摄时，JPEG的最小间隔和RAW的最大间隔可以相差最大为2s。</td>
    </tr>





  </tbody>
</table>

对于照片，DIJ相机通常支持JPEG（压缩）和DNG（RAW）图像格式。 相机还可以JPEG + RAW格式拍摄，每次拍摄会保存两张图像。

对于视频，仅Zenmuse X5 RAW和X5S支持捕获raw视频。 RAW视频文件具有高速数据率和大文件的特性，因此只能存储到固态驱动器（SSD）上。 所有相机均支持压缩格式的MP4（MPEG – 4 AVC）和MOV（H.264）。

## 曝光选项

正确曝光对于拍摄清晰可辨的图片非常重要。 在曝光不足（太暗）或曝光过度（太亮）下，照片将缺少物体的细节。在 [相机概念](https://developer.dji.com/doc/mobile-sdk-tutorial/cn/basic-introduction/basic-concepts/camera-exposure.html)中详细介绍并比较了曝光，光圈，快门，ISO，光圈，视野和景深背后的概念。

### 快门速度

相机快门将相机传感器曝光的时间由**快门速度**来描述。 DJI相机的快门速度通常为1/8000 s至8 s。 更快的快门速度可以清晰地捕捉场景中的移动特征，但是会使传感器暴露在更少的光线下。

相机录制视频时，不应将快门速度设置为低于视频帧速率。 例如，如果视频帧速率为30 fps，则快门速度必须为<= 1/30 s。

### ISO

ISO与应用于每个像素的放大量有关。 较高的ISO将增加放大率并因此增加曝光，但也会增加图像中的噪点。 较高的ISO可以使相机对光线更敏感，在捕获较暗的场景时很有用。

不同的DJI相机具有不同的ISO范围。 Zenmuse X5的ISO范围为100-25600。

### 光圈

相机光圈控制传感器可以看到整个世界的**窗口**的大小。 增加光圈会增加入射到相机上的光量，因此会增加曝光量。 这也将使景深变浅。 较浅的景深将意味着距相机不同距离的功能将更加失焦。 如果尝试高亮显示物体（让背景模糊），这会产生很大的效果，但是在尝试同时捕获焦点物体中的前景和背景时，可能会带来挑战。

光圈以f值或f档来衡量，其中的数字与孔径有关。 孔径面积加倍相当于将直径乘以1.414（2的平方根），并将曝光增加一档。

例如，Mavic Pro和Spark上的相机具有固定光圈镜头（例如f/2.8）。 Zenmuse X5的光圈范围为f/1.7至f/16。

### 曝光模式

有4种曝光模式，可根据自动或手动调整曝光的方式而有所不同。

1. **自动**：相机自动调节快门，光圈（如果有）和ISO以找到最佳曝光。在可调节光圈的相机上，ISO可以手动设置，也可以根据喜好自动设置。
2. **快门优先**：允许手动设置快门速度。光圈和ISO会自动调整以找到最佳曝光。在可调节光圈的相机上，ISO可以手动设置，也可以根据喜好自动设置。此模式对于尝试控制移动场景的清晰度很有用。
3. **光圈优先**：允许手动设置光圈。快门速度和ISO会自动调整以找到最佳曝光。在可调节光圈的相机上，ISO可以手动设置，也可以根据喜好自动设置。 尝试控制场景的景深时，此模式很有用。
4. **手动**：ISO，光圈和快门速度均是手动设置的。 可以监视`exposureCompensation`属性，以了解离良好的曝光还有多少补偿值。

相机概念包含 [说明](https://developer.dji.com/doc/mobile-sdk-tutorial/cn/basic-introduction/basic-concepts/camera-exposure.html) 以及有关设置光圈，快门速度和ISO以获得良好曝光时应考虑的事项的几个示例。

### 曝光补偿

在**自动**，**光圈优先**和**快门优先**的曝光模式下，曝光补偿值会更改相机的曝光目标，由用户设置。 这可用于拍摄较暗或较亮的图像。

在手动曝光模式下，此值从相机获取，告知用户需要补偿多少曝光才能达到相机认为正确的曝光。

### AE（自动曝光）测光

相机通过检查（测光）图像中的像素来测量曝光。 可以将测光设置为整个图像，也可以仅设置为图像的一部分（中心位置或自定义位置）。 这适用于用正确曝光的图像来拍摄具有高动态范围光线的场景。

### AE（自动曝光）锁定

如果正在自动计算曝光，则快门，光圈和ISO设置可能会动态变化。 AELock允许锁定曝光设置。 在移动相机的过程中（不改变曝光），可以使用它来自动设置场景中被摄对象的曝光。

## 照片设置

### 白平衡和色温

照亮场景中光的颜色（也称为色温）决定了所拍摄照片的颜色。 荧光白光比太阳光要冷（蓝光会更多），因此用荧光灯照亮的场景看起来会更冷。 如果调整了照片的白平衡，则可以将外部场景和内部场景调整为具有更多相似的颜色。 如果调整了白平衡，以使不同照片中的白色和灰色看起来相似，则照片中的其他颜色也应相似。

DJI SDK提供了几种与色温和白平衡相关的设置：

* 自动白平衡
* 预设白平衡（例如晴天，阴天，荧光灯等）
* 自定义色温

调整色温的另一种方法是以RAW格式捕获图像并在后期处理中更改色温。

### 防闪烁

在视频上拍摄时，由于其电源频率（50 Hz或60 Hz），闪烁的光源有时可能看起来很奇怪。 相机会检测到光源中的振荡，并且仅在闪烁对曝光或色彩的影响最小的情况下才会尝试拍摄照片。

该设置可以手动选择，也可以设置为自动模式。

### 清晰度

图像的清晰度描述了图像中定义的细节的清晰度。

图像的清晰度取决于许多因素，包括快门速度，镜头和制造质量，光圈，焦距，距图像中心和传感器的距离（像素数和抗混叠滤波器）。

使用图像上的高通和低通滤镜可以进一步锐化或柔化图片。锐化图像将突显亮度变化并强调细节。因此，锐化也会增加噪点，因为噪点被视为亮度的微小变化。

相比之下，柔化图像会减少亮度变化，减少噪点，但也会使更精细的细节难以看清。

DJI相机提供三种清晰度设置：**标准**，**硬**和**柔和**。

### 对比度

对比度是颜色和亮度的差异或渐变。 差异越大，对比度越高。 增加图像的对比度可以使其更生动，但也了减少细节量。

DJI相机提供三种对比度设置：**标准**，**硬**和**柔和**。

### 色相和饱和度

色相是纯色的另一种说法。 饱和度是颜色中的灰色量。 较低的饱和度会使颜色具有更多的灰色，并使它看起来更暗淡。 较高的饱和度会降低颜色中的灰色，使其更纯净。

在色盘上可以看到色相和饱和度。

<html><img src="https://terra-1-g.djicdn.com/84f990b0bbd145e6a3930de0c55d3b2b/admin/doc/fea85bd8-f66a-4a1c-ba4b-504dd712ddf9.png" width=30%></html>

色盘的外部具有完全的色彩饱和度。 色盘的中心为灰色，没有饱和度。

相机的色相和饱和度均可调节。 调整图像的色相会调整色彩。 调整饱和度将使图像或多或少地呈灰色。 高饱和度的图像可以非常生动，但也看起来很失真。

### 数字滤波器

DJI相机包含多个内置滤镜，可以产生有趣和创意的效果。 其中包括**油画**，**水彩**和**艺术**。

## 镜头与对焦

大多数DJI相机都配有固定镜头，固定光圈和无穷远定焦。

Zenmuse X5相机具有可变的光圈，可变的焦距以及支持更换DJI和第三方镜头的能力。

可调焦的DJI相机可进行手动和自动对焦。 在自动模式下，相机将从图像中的某个区域计算焦点，可以通过SDK进行设置。

手动对焦是通过以APP手动设置（或物理方式设置）对焦值来实现的。

对于某些镜头，首次使用镜头时，需要进行校准：

* 将对焦模式设置为自动
* 将相机对准远处的场景
* 确保焦点目标区域指向距离> 30m的物体
* 让相机自动对焦
* 读取最小对焦值

此对焦值可以与相机的序列号绑定，以备将来参考。

## 实时视频流

开发人员可以使用Mobile SDK从Camera获取实时H.264视频数据。 H.264是一种视频编码格式，当前是用于压缩和传播视频内容的最常用格式之一。

即使大多数相机可以拍摄1080p或4K视频，但是节省无线带宽，实时视频流通常为720p。 实时视频流在很大程度上取决于无线链接的质量。 无线系统很复杂，有许多变量会影响整体质量，随着传输距离的增加或障碍物开始阻塞信号，视频质量可能会迅速下降。

## 广播模式

对于Inspire 2，允许从Inspire 2以广播标准720p60（NTSC）或1080i50（PAL）传输视频。 一旦连接到广播设备，就可以在不进行信号转换的情况下实时直播视频素材。

在此相机模式下，可以录制视频。 静态照片也只能在录制视频时拍摄。 退出广播模式的唯一方法是将模式更改为**视频拍摄**。

## 回放管理模块

DJI相机支持媒体回放模式。 实时视频流将替换为媒体预览流。 可以将命令发送到相机：

* 查看单个预览或较小缩略图的页面
* 浏览单页和页面预览
* 选择和取消选择文件
* 删除媒体文件
* 播放/暂停/停止视频预览
* 下载媒体文件

## 媒体管理模块

媒体管理模块用于与SD卡上的文件系统进行交互。
通过使用媒体管理模块，可以读取所有媒体文件的元数据，并可以下载或删除媒体文件。

在媒体文件下载期间，实时视频源将暂停，因此所有无线带宽都可以专用于传输媒体文件。

## 媒体文件

### 存储

DJI相机通常使用SD卡存储照片和视频，可以根据需要选择Class 10或UHS-1 Micro SD卡来存储媒体文件。

Zenmuse X5 RAW还具有一个512GB固态硬盘（SSD）来记录视频。 4K RAW视频数据速率可以达到2.4 Gbps的峰值，而MP4或MOV则为60 Mbps。

Inspire 2（X5S和X4S）使用飞机上的SSD和SD存储设备，而不是使用相机上的存储设备，而其他所有相机都使用相机本身或相机集成到云台中的SD卡。

### 文件索引

有两种用于存储媒体文件的索引模式: **重置** 和 **序列**。

**重置模式**：相机会将最新文件的索引重置为比SD卡上拍摄的最大照片数量+1的索引。

**序列模式**，相机会将最新文件的索引设置为SD卡或相机上拍摄的最大照片数量中的较大者+1的索引。