本指引中使用的Android Studio版本为Android Studio Bumblebee 2021.1.1 大黄蜂，使用的MSDK版本为5.1.0，请根据实际版本自行适配。

## 注册成为DJI开发者

您可以点击<a href="https://account.dji.com/register?appId=dji_sdk&backUrl=https%3A%2F%2Fdeveloper.dji.com%2Fuser&locale=en_US" target="_blank">这里</a>注册成为DJI开发者。

在注册过程中，需要您提供电子邮件信息和信用卡或手机号码用于注册验证。您所提供的任何信用卡信息将仅用于验证，不会收取任何费用。

## 生成 App Key

每个应用程序都需要一个唯一的应用程序密钥(App Key)来初始化SDK。

要创建一个应用程序App Key，请访问DJI开发者网站的<a href="https://developer.dji.com/user" target="_blank">开发者中心</a>。

1. 点击左侧导航栏“应用”。
2. 点击右侧的“创建应用”按钮。
3. 用户自行填充App Type、APP 名称、开发平台、Package Name等信息。需要注意，根据用户选择的编译的目标App种类不同（全量App、飞行器App或者手持App），`Package Name`的用值也是不同的，参考`build.gradle`文件中的“applicationId”参数。
    * sample-app-all：编译全产品App，`Package Name`请填写：com.dji.sampleV5.all
    * sample-app-aircraft：编译飞行器App，`Package Name`请填写：com.dji.sampleV5.aircraft
    * sample-app-handheld：编译手持App，`Package Name`请填写：com.dji.sampleV5.handheld

    > **注意**: 手持App当前并未正式支持，编译出的手持App中仅支持拍照、录像、拍照录像切换等基础功能。若您需要深入的手持方向的开发，可以通过[DJI 技术支持社区](https://sdk-forum.dji.net/hc/zh-cn)反馈或者[提交表单](https://sdk-forum.dji.net/hc/zh-cn/requests/new)，会有技术人员跟进。

4. 用户会收到一封应用程序激活邮件，激活成功后返回开发者中心，即可获得App Key。复制粘贴App Key到应用程序配置中。


## Android 示例代码

Android SDK已经包含在项目中，因此无需下载即可直接运行Android 示例代码工程。

### 示例代码配置 

1. 下载或者克隆Github上的Android示例代码工程: <a href="https://github.com/dji-sdk/Mobile-SDK-Android-V5" target="_blank">https://github.com/dji-sdk/Mobile-SDK-Android-V5</a>。

2. Sample对配置做了封装，在Android Studio中打开Sample工程后，可直接将生成的App Key字符串补充进"gradle.properties" 文件中。用户根据编译的目标种类App（全量App、飞行器App或者手持App），填充对应的App Key，如图示。

  ![](https://terra-1-g.djicdn.com/71a7d383e71a4fb8887a310eb746b47f/msdk/Documentation/run-sample/app-key-define.png)



### 运行示例代码

以M30系列飞行器为例说明，将示例代码编译安装到M30 系列遥控器（即DJI RC Plus）中，然后可以将DJI RC Plus连接到M30 系列飞行器上运行示例应用。

在开始使用之前会向您请求权限，如下是所需权限的介绍。
* SDK 所需权限
  ```c
  <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
  <uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
  <uses-permission android:name="android.permission.INTERNET" />
  <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
  <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
  <uses-permission android:name="android.permission.KILL_BACKGROUND_PROCESSES"/>
  <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
  <uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" />
  <uses-permission android:name="android.permission.READ_PHONE_STATE" />
  ```

* Sample所需权限<br/>全量 app 模块（app-all）、手持 app 模块（app-handheld），飞行器 app 模块（app-aircraft），三个模块所需的权限是一致的。
  ```c
  <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
  <uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" />
  <uses-permission android:name="android.permission.RECORD_AUDIO" />
  ```

* uxsdk 所需权限
  ```c
  <uses-permission android:name="android.permission.VIBRATE" />
  <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
  <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
  ```

点击查看[权限具体含义](https://developer.android.com/reference/android/Manifest.permission)。

如果Sample主界面的左上角出现“注册状态：已注册” 字样说明示例代码运行成功，而出现”产品名称：M30_SERIES“，说明 MSDK 与飞行器连接成功。下图为SDK Manager接口调用流程图。

![SDK Manager.png](https://terra-1-g.djicdn.com/84f990b0bbd145e6a3930de0c55d3b2b/admin/doc/ec75e440-0a36-419a-9a62-fd5996789614.png)

> **注意:**
>
> **在M30 系列飞行器配套的遥控器DJI RC Plus上启动基于MSDK开发的第三方App时，需要在DJI RC Plus遥控器系统设置界面下的的应用和通知界面把官方DJI Pilot强行退出后才能正常启动。此问题是遥控器固件的设计导致。** 

![conflict.gif](https://terra-1-g.djicdn.com/71a7d383e71a4fb8887a310eb746b47f/msdk/Documentation/pilot_msdk_conflict.gif)




